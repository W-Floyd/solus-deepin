name       : deepin-api
version    : 3.1.17
release    : 1
source     :
    - https://github.com/linuxdeepin/dde-api/archive/3.1.17.tar.gz : ec34df71e0f1ce42bcf89089ecd2fd51b073eed41ac7a50bba3ed33f3d98edd6
extract    : no
networking : yes
license    : GPL-3.0
component  : programming.library
summary    : Go-lang bindings for deepin-daemon
description: |
    Go-lang bindings for deepin-daemon
rundeps    :
    - deepin-desktop-base
    - rfkill
builddeps  :
    - deepin-dbus-factory
    - deepin-gettext-tools
    - deepin-go-lib
    - deepin-gir-generator
    - git
    - golang
    - pkgconfig(gdk-3.0)
    - pkgconfig(librsvg-2.0)
    - pkgconfig(poppler-glib)
    - pkgconfig(libcanberra)
setup      : |
    mkdir {bin,pkg,src}
    mkdir -p src/github.com/linuxdeepin/
    tar xf $sources/$version.tar.gz -C src/github.com/linuxdeepin/
    mv src/github.com/linuxdeepin/dde-api-$version src/github.com/linuxdeepin/dde-api
    pushd src/github.com/linuxdeepin/dde-api
    popd
    mkdir -p src/pkg.deepin.io
build      : |
    export GOPATH=$workdir/:/usr/share/gocode
    go get gopkg.in/alecthomas/kingpin.v2
    go get github.com/nfnt/resize
    pushd src/github.com/linuxdeepin/dde-api
    make build-dep
    %make
    popd
install    : |
    export GOPATH=$workdir/:/usr/share/gocode
    pushd src/github.com/linuxdeepin/dde-api
    %make_install libdir=/lib64
    popd
